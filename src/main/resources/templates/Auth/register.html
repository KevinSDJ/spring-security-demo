<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <title>Register</title>
</head>
<body class="bg-gray-300">
        <div class="w-5/6 sm:w-5/6 md:w-4/6 lg:w-2/6 xl:2/6 mt-10 mx-auto flex flex-col justify-center items-center">
            
            <h1 class="text-gray-600 text-2xl font-semibold my-10">Create Account</h1>
            <form class="w-5/6"
                  th:action="@{/auth/register}" method="post" th:object="${user}">
                <div class="mb-6">
                    <label for="username" class="block mb-2 text-sm font-medium text-gray-900 ">Username</label>
                    <input type="text" th:field="*{username}" id="username" name="username" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light" required>
                </div>
                <div class="mb-6">
                    <label for="email" class="block mb-2 text-sm font-medium text-gray-900">Email</label>
                    <input type="email" th:field="*{email}" id="email" name="email" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light" placeholder="name@gmail.com" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block mb-2 text-sm font-medium text-gray-900 ">Password</label>
                    <input type="password" th:field="*{password}" name="password" id="password" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light" required>
                </div>
                <button type="submit" class="text-white w-full bg-blue-700 py-3 hover:bg-blue-800 rounded-md">register</button>
                <p class="w-full py-4 text-center">If you are already registered <a class="text-blue-800" th:href="@{/auth/login}">Login</a></p>
            </form>
        </div>
        <script defer>
            var paramerr = window.location.search.match("error");
            var paramsucces= window.location.search.match("success");
            if (paramerr) {
                Toastify({
                    text: "The user is already registeredt",
                    className: "error",
                    style: {
                        background: "rgb(235, 105, 96)",
                    }
                    
                }).showToast();
                setTimeout(()=>{
                        let s= window.location.pathname
                        window.location.replace(s)
                    },3000)
            }
            if (paramsucces) {
                Toastify({
                    text: "Registration successful",
                    className: "success",
                    style: {
                        background: "#7ec26e",
                    }
                    
                }).showToast();
                setTimeout(()=>{
                        let s= window.location.host
                        window.location.replace("/auth/login")
                    },3000)
            }
            
        </script>
</body>
</html>